{"version":3,"sources":["main.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","handleIntersect","entries","observer","forEach","entry","intersectionRatio","image","target","url","getAttribute","setAttribute","unobserve","window","addEventListener","event","images","document","querySelectorAll","IntersectionObserver","root","rootMargin","threshold","observe","2","obj","__esModule","arguments","undefined","self","frontPagePosts","xhr","XMLHttpRequest","open","onload","status","json","JSON","parse","responseText","postIndex","container","getElementById","front_page","post","li","createElement","card","id","style","backgroundImage","title","innerHTML","append","imageSource","className","sourceJpeg","sourceWebp","imageURL","concat","media","alt","details","user","send","fetchPosts","./lazyloader.js"],"mappings":"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","file":"../main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n// Set things up.\nwindow.addEventListener(\"load\", function (event) {\n  createObserver();\n}, false);\n\nfunction createObserver() {\n  var options = {\n    root: null,\n    rootMargin: \"0px\",\n    threshold: .01\n  };\n  var images = document.querySelectorAll('.post-img');\n  var observer = new IntersectionObserver(handleIntersect, options);\n  images.forEach(function (image) {\n    observer.observe(image);\n  });\n}\n\nfunction handleIntersect(entries, observer) {\n  // Loop through the entries\n  entries.forEach(function (entry) {\n    // Are we in viewport?\n    if (entry.intersectionRatio > 0) {\n      // Stop watching and load the image\n      var image = entry.target;\n      var url = image.getAttribute('data-src');\n      image.setAttribute('src', url);\n      observer.unobserve(entry.target);\n    }\n  });\n}\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nvar _lazyloader = _interopRequireDefault(require(\"./lazyloader.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar postIndex;\nwindow.addEventListener('DOMContentLoaded', function () {\n  fetchPosts();\n});\n\nfunction FillFrontPagePosts() {\n  var container = document.getElementById('post-list');\n  self.postIndex.front_page.forEach(function (post) {\n    var li = document.createElement('li');\n    var card = document.createElement('div');\n    card.id = 'post-card';\n    li.style.backgroundImage = \"url('/images/svg/GameDevLogo.svg')\";\n    li.id = post.id;\n    var title = document.createElement('h1');\n    title.innerHTML = post.title;\n    card.append(title);\n    li.append(card);\n    container.append(li);\n    var image = document.createElement('picture');\n    var imageSource = document.createElement('img');\n    imageSource.className = 'post-img';\n    var sourceJpeg = document.createElement('source');\n    var sourceWebp = document.createElement('source');\n    var imageURL = \"\".concat(post.media);\n\n    if (imageURL === '/images/undefined') {\n      imageURL = '/images/no_image';\n    }\n\n    imageSource.setAttribute('src', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcPiWrHgAFdQIWjjm6lwAAAABJRU5ErkJggg==');\n    imageSource.setAttribute('data-src', \"\".concat(imageURL, \"_small_1x.webp\"));\n    sourceWebp.setAttribute(\"srcset\", \"\".concat(imageURL, \"_small_1x.webp 550w, \").concat(imageURL, \"_medium_1x.webp 800w,\\n  \").concat(imageURL, \"_large_1x.webp 1600w\"));\n    sourceJpeg.setAttribute(\"srcset\", \"\".concat(imageURL, \"_small_1x.jpg 550w, \").concat(imageURL, \"_medium_1x.jpg 800w,\\n  \").concat(imageURL, \"_large_1x.jpg 1600w\"));\n    imageSource.setAttribute(\"alt\", \"Image for \".concat(post.title));\n    image.alt = \"Image for \".concat(post.title);\n    image.append(imageSource, sourceWebp, sourceJpeg);\n    card.append(image);\n    var details = document.createElement('h2');\n    details.innerHTML = post.details;\n    card.append(details);\n    var user = document.createElement('p');\n    user.innerHTML = post.user;\n    user.setAttribute(\"aria-label\", \"user who made the post\");\n    card.append(user);\n  });\n}\n/**\r\n * Fetch all restaurants.\r\n */\n\n\nfunction fetchPosts() {\n  var posts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.frontPagePosts;\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', \"http://localhost:3000/data/posts.json\");\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      // Got a success response from server!\n      var json = JSON.parse(xhr.responseText);\n      self.postIndex = json;\n      FillFrontPagePosts(); // callback(null, json);\n    } else {\n      // Oops!. Got an error from server.\n      var error = \"Request failed. Returned status of \".concat(xhr.status); // callback(error, null);\n    }\n  };\n\n  xhr.send();\n}\n\n},{\"./lazyloader.js\":1}]},{},[2]);\n"]}